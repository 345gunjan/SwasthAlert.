<!DOCTYPE html>
<html>
<head>
    <title>Tika Login</title>
</head>
<body style="margin:0; font-family:Poppins, sans-serif;">

<div style="display:flex; flex-wrap:wrap; height:100vh;">

    <!-- Left side: Login Form -->
    <div style="flex:1 1 400px; display:flex; flex-direction:column; justify-content:center; align-items:center; background:#f3f4f6; padding:40px; min-width:300px;">
        <h2 style="margin-bottom:20px; color:#222;">Login to Tika Notification</h2>

        <form id="loginForm" style="background:#fff; padding:30px; width:100%; max-width:320px; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.1); display:flex; flex-direction:column; gap:10px;">
            <input type="text" id="username" placeholder="Username" required style="padding:10px; border:1.5px solid #ccc; border-radius:8px; font-size:15px; outline:none;">
            <input type="password" id="password" placeholder="Password" required style="padding:10px; border:1.5px solid #ccc; border-radius:8px; font-size:15px; outline:none;">
            <button type="submit" style="background:#4f46e5; color:white; padding:12px; border:none; border-radius:8px; font-size:16px; cursor:pointer; margin-top:10px;">Login ðŸš€</button>
        </form>

        <p style="margin-top:12px; font-size:14px;">Don't have an account? <a href="register.html" style="color:#4f46e5; text-decoration:none;">Register here</a></p>
    </div>

    <!-- Right side: Image / Wallpaper -->
    <div style="
        flex:1 1 400px;
        background:url('images/vaccine.jpg') no-repeat center center;
        background-size:cover;
        min-width:300px;
        height:100%;
        position:relative;
    ">
        <div style="width:100%; height:100%; background:rgba(0,0,0,0.2); position:absolute; top:0; left:0;"></div>
    </div>

</div>

<script>
document.getElementById("loginForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const loginData = {
        username: document.getElementById("username").value,
        password: document.getElementById("password").value
    };

    try {
        const res = await fetch("/login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(loginData)
        });

        const result = await res.json();
        alert(result.message);

        if (res.status === 200) {
            window.location.href = "/profile.html?username=" + loginData.username;
        }
    } catch (err) {
        alert("Login Failed  Check server!");
        console.error(err);
    }
});
</script>

</body>
</html>
